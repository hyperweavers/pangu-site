import{o as Se,p as Ie,w as Pe}from"./chunk-2NKUINGN.js";import{a as b}from"./chunk-HY3UCQ3V.js";import{Ba as Ce,C as ge,E as ye,F as oe,G as ae,I as be,K as Te,Q as Z,R as Ee,X as Ne,Y as ce,_ as y,a as Q,b as me,ba as O,fa as B,i as fe,ia as A,ka as F,la as N,m as pe,ma as ve,oa as we,pa as Re,s as v,va as Me,w as f}from"./chunk-JGUQRCJW.js";var W=(function(i){return i[i.OPEN=0]="OPEN",i[i.CLOSED=1]="CLOSED",i})(W||{}),w=(function(i){return i.NSE="nse",i.BSE="bse",i})(w||{}),D=(function(i){return i[i.UP=1]="UP",i[i.DOWN=-1]="DOWN",i})(D||{}),L={nse:[{name:"Nifty Pharma",etm:{id:"13017",symbol:"CNXPHARMA"},mc:{id:"41",symbol:"in;cpr"}},{name:"Nifty Financial Services",etm:{id:"13655",symbol:"FINNIFTY"},mc:{id:"47",symbol:"in;cnxf"}},{name:"Nifty Private Bank",etm:{id:"15270",symbol:"NIFTYPBI"},mc:{id:"79",symbol:"in;nxb"}},{name:"Nifty Bank",etm:{id:"1913",symbol:"BANKNIFTY"},mc:{id:"23",symbol:"in;nbx"}},{name:"Nifty Media",etm:{id:"13604",symbol:"CNXMEDIA"},mc:{id:"50",symbol:"in;cnmx"}},{name:"Nifty Services Sector",etm:{id:"13021",symbol:"CNXSSI"},mc:{id:"44",symbol:"in;crv"}},{name:"Nifty FMCG",etm:{id:"13027",symbol:"CNXFMCG"},mc:{id:"39",symbol:"in;cfm"}},{name:"Nifty India Consumption",etm:{id:"13653",symbol:"CNXCONSUM"},mc:{id:"56",symbol:"in;cnxc"}},{name:"Nifty SmallCap 100",etm:{id:"13532",symbol:"CNXSCAP"},mc:{id:"53",symbol:"in;cnxs"}},{name:"Nifty SmallCap 250",etm:{id:"15499",symbol:"NIFSC250"},mc:{id:"114",symbol:"mc;nscapt"}},{name:"Nifty SmallCap 50",etm:{id:"15431",symbol:"NIFSC50"},mc:{id:"113",symbol:"mc;nscapf"}},{name:"Nifty MidSmallCap 400",etm:{id:"15436",symbol:"NIFMSC400"},mc:{id:"112",symbol:"mc;nmsml"}},{name:"Nifty MidCap 100",etm:{id:"2495",symbol:"CNXMIDCAP"},mc:{id:"27",symbol:"in;ccx"}},{name:"Nifty MidCap 150",etm:{id:"15430",symbol:"NIFMC150"},mc:{id:"111",symbol:"mc;nmcapo"}},{name:"Nifty LargeMidCap 250",etm:{id:"16207",symbol:"NIFTYLMC250"},mc:{id:"124",symbol:"mc;larmid"}},{name:"Nifty 500",etm:{id:"2371",symbol:"CNX500"},mc:{id:"7",symbol:"in;ncx"}},{name:"Nifty 200",etm:{id:"13602",symbol:"CNX200"},mc:{id:"49",symbol:"in;cnxt"}},{name:"Nifty 100",etm:{id:"2510",symbol:"CNX100"},mc:{id:"28",symbol:"in;nnx"}},{name:"Nifty 50",main:!0,etm:{id:"2369",symbol:"NSE Index"},mc:{id:"9",symbol:"in;NSX"}},{name:"Nifty Oil & Gas",etm:{id:"32289",symbol:"NIFTYOILGAS"},mc:{id:"126",symbol:"mc;oilgas"}},{name:"Nifty Next 50",etm:{id:"2346",symbol:"NIFTYNXT50"},mc:{id:"6",symbol:"in;cjn"}},{name:"Nifty Energy",etm:{id:"13016",symbol:"CNXENERGY"},mc:{id:"38",symbol:"in;cgy"}},{name:"Nifty MidCap 50",etm:{id:"2907",symbol:"MIDCAP50"},mc:{id:"31",symbol:"in;mfy"}},{name:"Nifty Infrastructure",etm:{id:"13022",symbol:"CNXINFRA"},mc:{id:"35",symbol:"in;cfr"}},{name:"Nifty India Manufacturing",etm:{id:"47194",symbol:"NIFINDIAMANU"},mc:{id:"133",symbol:"mc;nindiamfg"}},{name:"Nifty PSU Bank",etm:{id:"13026",symbol:"CNXPSUBANK"},mc:{id:"43",symbol:"in;cuk"}},{name:"Nifty PSE",etm:{id:"13029",symbol:"CNXPSE"},mc:{id:"42",symbol:"in;cps"}},{name:"Nifty CPSE",etm:{id:"14214",symbol:"CPSE"},mc:{id:"61",symbol:"in;nxe"}},{name:"Nifty MNC",etm:{id:"13019",symbol:"CNXMNC"},mc:{id:"40",symbol:"in;cxc"}},{name:"Nifty Commodities",etm:{id:"13654",symbol:"CNXCOMMO"},mc:{id:"48",symbol:"in;cnxz"}},{name:"Nifty IT",etm:{id:"186",symbol:"CNXIT"},mc:{id:"19",symbol:"in;cnit"}},{name:"Nifty Metal",etm:{id:"13605",symbol:"CNXMETAL"},mc:{id:"51",symbol:"in;CNXM"}},{name:"Nifty Auto",etm:{id:"13603",symbol:"CNXAUTO"},mc:{id:"52",symbol:"in;cnxa"}},{name:"Nifty Realty",etm:{id:"13030",symbol:"CNXREALTY"},mc:{id:"34",symbol:"in;crl"}}],bse:[{name:"BSE SME IPO",etm:{id:"13794",symbol:"SMEIPO"},mc:{id:"58",symbol:"in;zpo"}},{name:"BSE Healthcare",etm:{id:"2276",symbol:"BSE HC"},mc:{id:"15",symbol:"IN;HAX"}},{name:"BSE Power",etm:{id:"12356",symbol:"POWER"},mc:{id:"30",symbol:"in;bpo"}},{name:"BSE IPO",etm:{id:"12725",symbol:"BSEIPO"},mc:{id:"33",symbol:"in;bip"}},{name:"BSE SmallCap",etm:{id:"2022",symbol:"SMLCAP"},mc:{id:"26",symbol:"in;BCX"}},{name:"BSE Telecommunication",etm:{id:"14917",symbol:"TELCOM"},mc:{id:"76",symbol:"in;tez"}},{name:"BSE Bankex",etm:{id:"2647",symbol:"BANKEX"},mc:{id:"18",symbol:"IN;bkx"}},{name:"BSE Fast Moving Consumer Goods",etm:{id:"2274",symbol:"BSEFMC"},mc:{id:"14",symbol:"IN;FMX"}},{name:"BSE SENSEX Next 50",etm:{id:"15817",symbol:"SNXT50"},mc:{id:"101",symbol:"in;bxn"}},{name:"BSE Utilities",etm:{id:"14848",symbol:"UTILS"},mc:{id:"77",symbol:"in;bsu"}},{name:"BSE 150 MidCap",etm:{id:"16178",symbol:"MID150"},mc:{id:"103",symbol:"in;MCD"}},{name:"BSE 400 MidSmallCap",etm:{id:"16177",symbol:"MSL400"},mc:{id:"106",symbol:"in;MSI"}},{name:"BSE 250 SmallCap",etm:{id:"16179",symbol:"SML250"},mc:{id:"104",symbol:"in;SCI"}},{name:"BSE Consumer Durables",etm:{id:"2275",symbol:"BSE CD"},mc:{id:"16",symbol:"IN;CDX"}},{name:"BSE AllCap",etm:{id:"14912",symbol:"ALLCAP"},mc:{id:"67",symbol:"IN;bsx"}},{name:"BSE 500",etm:{id:"2342",symbol:"BSE500"},mc:{id:"12",symbol:"IN;BNX"}},{name:"BSE LargeCap",etm:{id:"14852",symbol:"LRGCAP"},mc:{id:"73",symbol:"in;blp"}},{name:"BSE 200",etm:{id:"2364",symbol:"BSE200"},mc:{id:"2",symbol:"IN;SEI"}},{name:"BSE 250 LargeMidCap",etm:{id:"16181",symbol:"LMI250"},mc:{id:"105",symbol:"in;LMI"}},{name:"BSE SmallCap Select",etm:{id:"14959",symbol:"SMLSEL"},mc:{id:"75",symbol:"in;cey"}},{name:"BSE Sensex",main:!0,etm:{id:"2365",symbol:"SENSEX"},mc:{id:"4",symbol:"in;SEN"}},{name:"BSE 100",etm:{id:"2340",symbol:"BSE100"},mc:{id:"1",symbol:"IN;NTL"}},{name:"BSE MidCap",etm:{id:"1906",symbol:"MIDCAP"},mc:{id:"25",symbol:"in;bmx"}},{name:"BSE Sensex 50",etm:{id:"15648",symbol:"SNSX50"},mc:{id:"100",symbol:"in;bxx"}},{name:"BSE India Infrastructure",etm:{id:"14354",symbol:"INFRA"},mc:{id:"62",symbol:"mc;binfra"}},{name:"BSE Oil & Gas",etm:{id:"2555",symbol:"OILGAS"},mc:{id:"22",symbol:"IN;ogx"}},{name:"BSE Energy",etm:{id:"14911",symbol:"ENERGY"},mc:{id:"70",symbol:"in;bsq"}},{name:"BSE Industrials",etm:{id:"14856",symbol:"INDSTR"},mc:{id:"72",symbol:"in;scx"}},{name:"BSE CPSE",etm:{id:"14537",symbol:"CPSE"},mc:{id:"63",symbol:"mc;bcpse"}},{name:"BSE PSU",etm:{id:"6929",symbol:"BSEPSU"},mc:{id:"11",symbol:"in;pbx"}},{name:"BSE Capital Goods",etm:{id:"2273",symbol:"BSE CG"},mc:{id:"13",symbol:"IN;CGX"}},{name:"BSE MidCap Select",etm:{id:"14958",symbol:"MIDSEL"},mc:{id:"74",symbol:"in;ihb"}},{name:"BSE TECk",etm:{id:"10968",symbol:"TECK"},mc:{id:"10",symbol:"in;tkx"}},{name:"BSE Bharat 22",etm:{id:"16021",symbol:"BHRT22"},mc:{id:"102",symbol:"in;bin"}},{name:"BSE India Manufacturing",etm:{id:"14854",symbol:"MFG"},mc:{id:"66",symbol:"in;mfg"}},{name:"BSE Information Technology",etm:{id:"2157",symbol:"BSE IT"},mc:{id:"17",symbol:"IN;ifx"}},{name:"BSE Auto",etm:{id:"2416",symbol:"AUTO"},mc:{id:"20",symbol:"IN;aox"}},{name:"BSE Metal",etm:{id:"2449",symbol:"METAL"},mc:{id:"21",symbol:"IN;MLX"}},{name:"BSE Realty",etm:{id:"2739",symbol:"REALTY"},mc:{id:"29",symbol:"in;rea"}}]};var k=class{static epochToUtcTimestamp(e){return e&&e>0?Math.trunc(e/1e3):-1}static getTimestampSince(e,r){if(e&&e instanceof Date&&!isNaN(e.getTime())){let s=new Date(e);return s.setDate(s.getDate()-Math.abs(r)),s.getTime()}else return-1}};var V=class{},z=class{},_=class i{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(r=>{let s=r.indexOf(":");if(s>0){let t=r.slice(0,s),n=r.slice(s+1).trim();this.addHeaderEntry(t,n)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((r,s)=>{this.addHeaderEntry(s,r)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([r,s])=>{this.setHeaderEntries(r,s)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let r=this.headers.get(e.toLowerCase());return r&&r.length>0?r[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,r){return this.clone({name:e,value:r,op:"a"})}set(e,r){return this.clone({name:e,value:r,op:"s"})}delete(e,r){return this.clone({name:e,value:r,op:"d"})}maybeSetNormalizedName(e,r){this.normalizedNames.has(r)||this.normalizedNames.set(r,e)}init(){this.lazyInit&&(this.lazyInit instanceof i?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(r=>{this.headers.set(r,e.headers.get(r)),this.normalizedNames.set(r,e.normalizedNames.get(r))})}clone(e){let r=new i;return r.lazyInit=this.lazyInit&&this.lazyInit instanceof i?this.lazyInit:this,r.lazyUpdate=(this.lazyUpdate||[]).concat([e]),r}applyUpdate(e){let r=e.name.toLowerCase();switch(e.op){case"a":case"s":let s=e.value;if(typeof s=="string"&&(s=[s]),s.length===0)return;this.maybeSetNormalizedName(e.name,r);let t=(e.op==="a"?this.headers.get(r):void 0)||[];t.push(...s),this.headers.set(r,t);break;case"d":let n=e.value;if(!n)this.headers.delete(r),this.normalizedNames.delete(r);else{let o=this.headers.get(r);if(!o)return;o=o.filter(a=>n.indexOf(a)===-1),o.length===0?(this.headers.delete(r),this.normalizedNames.delete(r)):this.headers.set(r,o)}break}}addHeaderEntry(e,r){let s=e.toLowerCase();this.maybeSetNormalizedName(e,s),this.headers.has(s)?this.headers.get(s).push(r):this.headers.set(s,[r])}setHeaderEntries(e,r){let s=(Array.isArray(r)?r:[r]).map(n=>n.toString()),t=e.toLowerCase();this.headers.set(t,s),this.maybeSetNormalizedName(e,t)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(r=>e(this.normalizedNames.get(r),this.headers.get(r)))}};var te=class{encodeKey(e){return Oe(e)}encodeValue(e){return Oe(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function $e(i,e){let r=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(t=>{let n=t.indexOf("="),[o,a]=n==-1?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,n)),e.decodeValue(t.slice(n+1))],d=r.get(o)||[];d.push(a),r.set(o,d)}),r}var We=/%(\d[a-f0-9])/gi,ze={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Oe(i){return encodeURIComponent(i).replace(We,(e,r)=>ze[r]??e)}function ee(i){return`${i}`}var C=class i{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new te,e.fromString){if(e.fromObject)throw new O(2805,!1);this.map=$e(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(r=>{let s=e.fromObject[r],t=Array.isArray(s)?s.map(ee):[ee(s)];this.map.set(r,t)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let r=this.map.get(e);return r?r[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,r){return this.clone({param:e,value:r,op:"a"})}appendAll(e){let r=[];return Object.keys(e).forEach(s=>{let t=e[s];Array.isArray(t)?t.forEach(n=>{r.push({param:s,value:n,op:"a"})}):r.push({param:s,value:t,op:"a"})}),this.clone(r)}set(e,r){return this.clone({param:e,value:r,op:"s"})}delete(e,r){return this.clone({param:e,value:r,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let r=this.encoder.encodeKey(e);return this.map.get(e).map(s=>r+"="+this.encoder.encodeValue(s)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let r=new i({encoder:this.encoder});return r.cloneFrom=this.cloneFrom||this,r.updates=(this.updates||[]).concat(e),r}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let r=(e.op==="a"?this.map.get(e.param):void 0)||[];r.push(ee(e.value)),this.map.set(e.param,r);break;case"d":if(e.value!==void 0){let s=this.map.get(e.param)||[],t=s.indexOf(ee(e.value));t!==-1&&s.splice(t,1),s.length>0?this.map.set(e.param,s):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var re=class{map=new Map;set(e,r){return this.map.set(e,r),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Ge(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Ae(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function ke(i){return typeof Blob<"u"&&i instanceof Blob}function _e(i){return typeof FormData<"u"&&i instanceof FormData}function Je(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}var Be="Content-Type",Fe="Accept",Le="X-Request-URL",xe="text/plain",Ue="application/json",Ke=`${Ue}, ${xe}, */*`,X=class i{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,r,s,t){this.url=r,this.method=e.toUpperCase();let n;if(Ge(this.method)||t?(this.body=s!==void 0?s:null,n=t):n=s,n){if(this.reportProgress=!!n.reportProgress,this.withCredentials=!!n.withCredentials,this.keepalive=!!n.keepalive,n.responseType&&(this.responseType=n.responseType),n.headers&&(this.headers=n.headers),n.context&&(this.context=n.context),n.params&&(this.params=n.params),n.priority&&(this.priority=n.priority),n.cache&&(this.cache=n.cache),n.credentials&&(this.credentials=n.credentials),typeof n.timeout=="number"){if(n.timeout<1||!Number.isInteger(n.timeout))throw new O(2822,"");this.timeout=n.timeout}n.mode&&(this.mode=n.mode),n.redirect&&(this.redirect=n.redirect),n.integrity&&(this.integrity=n.integrity),n.referrer&&(this.referrer=n.referrer),this.transferCache=n.transferCache}if(this.headers??=new _,this.context??=new re,!this.params)this.params=new C,this.urlWithParams=r;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=r;else{let a=r.indexOf("?"),d=a===-1?"?":a<r.length-1?"&":"";this.urlWithParams=r+d+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Ae(this.body)||ke(this.body)||_e(this.body)||Je(this.body)?this.body:this.body instanceof C?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||_e(this.body)?null:ke(this.body)?this.body.type||null:Ae(this.body)?null:typeof this.body=="string"?xe:this.body instanceof C?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Ue:null}clone(e={}){let r=e.method||this.method,s=e.url||this.url,t=e.responseType||this.responseType,n=e.keepalive??this.keepalive,o=e.priority||this.priority,a=e.cache||this.cache,d=e.mode||this.mode,p=e.redirect||this.redirect,S=e.credentials||this.credentials,T=e.referrer||this.referrer,E=e.integrity||this.integrity,R=e.transferCache??this.transferCache,U=e.timeout??this.timeout,j=e.body!==void 0?e.body:this.body,l=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,h=e.headers||this.headers,I=e.params||this.params,m=e.context??this.context;return e.setHeaders!==void 0&&(h=Object.keys(e.setHeaders).reduce((M,g)=>M.set(g,e.setHeaders[g]),h)),e.setParams&&(I=Object.keys(e.setParams).reduce((M,g)=>M.set(g,e.setParams[g]),I)),new i(r,s,j,{params:I,headers:h,context:m,reportProgress:u,responseType:t,withCredentials:l,transferCache:R,keepalive:n,cache:a,priority:o,timeout:U,mode:d,redirect:p,credentials:S,referrer:T,integrity:E})}},x=(function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i})(x||{}),$=class{headers;status;statusText;url;ok;type;redirected;constructor(e,r=200,s="OK"){this.headers=e.headers||new _,this.status=e.status!==void 0?e.status:r,this.statusText=e.statusText||s,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},ne=class i extends ${constructor(e={}){super(e)}type=x.ResponseHeader;clone(e={}){return new i({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},G=class i extends ${body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=x.Response;clone(e={}){return new i({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},Y=class extends ${name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},qe=200,He=204;function de(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials,credentials:i.credentials,transferCache:i.transferCache,timeout:i.timeout,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,integrity:i.integrity,referrer:i.referrer}}var se=(()=>{class i{handler;constructor(r){this.handler=r}request(r,s,t={}){let n;if(r instanceof X)n=r;else{let d;t.headers instanceof _?d=t.headers:d=new _(t.headers);let p;t.params&&(t.params instanceof C?p=t.params:p=new C({fromObject:t.params})),n=new X(r,s,t.body!==void 0?t.body:null,{headers:d,context:t.context,params:p,reportProgress:t.reportProgress,responseType:t.responseType||"json",withCredentials:t.withCredentials,transferCache:t.transferCache,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect,credentials:t.credentials,referrer:t.referrer,integrity:t.integrity,timeout:t.timeout})}let o=v(n).pipe(Te(d=>this.handler.handle(d)));if(r instanceof X||t.observe==="events")return o;let a=o.pipe(be(d=>d instanceof G));switch(t.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return a.pipe(f(d=>{if(d.body!==null&&!(d.body instanceof ArrayBuffer))throw new O(2806,!1);return d.body}));case"blob":return a.pipe(f(d=>{if(d.body!==null&&!(d.body instanceof Blob))throw new O(2807,!1);return d.body}));case"text":return a.pipe(f(d=>{if(d.body!==null&&typeof d.body!="string")throw new O(2808,!1);return d.body}));case"json":default:return a.pipe(f(d=>d.body))}case"response":return a;default:throw new O(2809,!1)}}delete(r,s={}){return this.request("DELETE",r,s)}get(r,s={}){return this.request("GET",r,s)}head(r,s={}){return this.request("HEAD",r,s)}jsonp(r,s){return this.request("JSONP",r,{params:new C().append(s,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,s={}){return this.request("OPTIONS",r,s)}patch(r,s,t={}){return this.request("PATCH",r,de(t,s))}post(r,s,t={}){return this.request("POST",r,de(t,s))}put(r,s,t={}){return this.request("PUT",r,de(t,s))}static \u0275fac=function(s){return new(s||i)(F(V))};static \u0275prov=B({token:i,factory:i.\u0275fac})}return i})();var Qe=new A("");function Ze(i,e){return e(i)}function et(i,e,r){return(s,t)=>Re(r,()=>e(s,n=>i(n,t)))}var je=new A(""),De=new A(""),Xe=new A("",{providedIn:"root",factory:()=>!0});var ie=(()=>{class i extends V{backend;injector;chain=null;pendingTasks=N(Ce);contributeToStability=N(Xe);constructor(r,s){super(),this.backend=r,this.injector=s}handle(r){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(je),...this.injector.get(De,[])]));this.chain=s.reduceRight((t,n)=>et(t,n,this.injector),Ze)}if(this.contributeToStability){let s=this.pendingTasks.add();return this.chain(r,t=>this.backend.handle(t)).pipe(Ee(s))}else return this.chain(r,s=>this.backend.handle(s))}static \u0275fac=function(s){return new(s||i)(F(z),F(we))};static \u0275prov=B({token:i,factory:i.\u0275fac})}return i})();var tt=/^\)\]\}',?\n/,rt=RegExp(`^${Le}:`,"m");function nt(i){return"responseURL"in i&&i.responseURL?i.responseURL:rt.test(i.getAllResponseHeaders())?i.getResponseHeader(Le):null}var le=(()=>{class i{xhrFactory;constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new O(-2800,!1);let s=this.xhrFactory;return v(null).pipe(y(()=>new fe(n=>{let o=s.build();if(o.open(r.method,r.urlWithParams),r.withCredentials&&(o.withCredentials=!0),r.headers.forEach((l,u)=>o.setRequestHeader(l,u.join(","))),r.headers.has(Fe)||o.setRequestHeader(Fe,Ke),!r.headers.has(Be)){let l=r.detectContentTypeHeader();l!==null&&o.setRequestHeader(Be,l)}if(r.timeout&&(o.timeout=r.timeout),r.responseType){let l=r.responseType.toLowerCase();o.responseType=l!=="json"?l:"text"}let a=r.serializeBody(),d=null,p=()=>{if(d!==null)return d;let l=o.statusText||"OK",u=new _(o.getAllResponseHeaders()),h=nt(o)||r.url;return d=new ne({headers:u,status:o.status,statusText:l,url:h}),d},S=()=>{let{headers:l,status:u,statusText:h,url:I}=p(),m=null;u!==He&&(m=typeof o.response>"u"?o.responseText:o.response),u===0&&(u=m?qe:0);let M=u>=200&&u<300;if(r.responseType==="json"&&typeof m=="string"){let g=m;m=m.replace(tt,"");try{m=m!==""?JSON.parse(m):null}catch(P){m=g,M&&(M=!1,m={error:P,text:m})}}M?(n.next(new G({body:m,headers:l,status:u,statusText:h,url:I||void 0})),n.complete()):n.error(new Y({error:m,headers:l,status:u,statusText:h,url:I||void 0}))},T=l=>{let{url:u}=p(),h=new Y({error:l,status:o.status||0,statusText:o.statusText||"Unknown Error",url:u||void 0});n.error(h)},E=T;r.timeout&&(E=l=>{let{url:u}=p(),h=new Y({error:new DOMException("Request timed out","TimeoutError"),status:o.status||0,statusText:o.statusText||"Request timeout",url:u||void 0});n.error(h)});let R=!1,U=l=>{R||(n.next(p()),R=!0);let u={type:x.DownloadProgress,loaded:l.loaded};l.lengthComputable&&(u.total=l.total),r.responseType==="text"&&o.responseText&&(u.partialText=o.responseText),n.next(u)},j=l=>{let u={type:x.UploadProgress,loaded:l.loaded};l.lengthComputable&&(u.total=l.total),n.next(u)};return o.addEventListener("load",S),o.addEventListener("error",T),o.addEventListener("timeout",E),o.addEventListener("abort",T),r.reportProgress&&(o.addEventListener("progress",U),a!==null&&o.upload&&o.upload.addEventListener("progress",j)),o.send(a),n.next({type:x.Sent}),()=>{o.removeEventListener("error",T),o.removeEventListener("abort",T),o.removeEventListener("load",S),o.removeEventListener("timeout",E),r.reportProgress&&(o.removeEventListener("progress",U),a!==null&&o.upload&&o.upload.removeEventListener("progress",j)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(s){return new(s||i)(F(Ie))};static \u0275prov=B({token:i,factory:i.\u0275fac})}return i})(),Ye=new A(""),it="XSRF-TOKEN",st=new A("",{providedIn:"root",factory:()=>it}),ot="X-XSRF-TOKEN",at=new A("",{providedIn:"root",factory:()=>ot}),J=class{},ct=(()=>{class i{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(r,s){this.doc=r,this.cookieName=s}getToken(){let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Se(r,this.cookieName),this.lastCookieString=r),this.lastToken}static \u0275fac=function(s){return new(s||i)(F(Me),F(st))};static \u0275prov=B({token:i,factory:i.\u0275fac})}return i})(),dt=/^(?:https?:)?\/\//i;function lt(i,e){if(!N(Ye)||i.method==="GET"||i.method==="HEAD"||dt.test(i.url))return e(i);let r=N(J).getToken(),s=N(at);return r!=null&&!i.headers.has(s)&&(i=i.clone({headers:i.headers.set(s,r)})),e(i)}function ut(...i){let e=[se,le,ie,{provide:V,useExisting:ie},{provide:z,useFactory:()=>N(Qe,{optional:!0})??N(le)},{provide:je,useValue:lt,multi:!0},{provide:Ye,useValue:!0},{provide:J,useClass:ct}];for(let r of i)e.push(...r.\u0275providers);return ve(e)}var ue=(function(i){return i.LIVE="Live",i.CLOSE="CLOSED",i})(ue||{});var K=(function(i){return i.NSE="50",i.BSE="47",i})(K||{});var he=(function(i){return i.OK="ok",i.NO_DATA="no_data",i.ERROR="error",i})(he||{});var q=class q{static getDirection(e){return e>=0?D.UP:D.DOWN}static getExchangeNameFromVendorCode(e){return e===K.NSE?w.NSE:w.BSE}static getExchangeVendorCodeFromName(e){return e===w.NSE?K.NSE:K.BSE}static stringToNumber(e){return Number(e.replace(/,/g,""))}static dateStringToEpoch(e){return new Date(e).getTime()}static getBusinessDays(e,r){let s=new Date(e),t=new Date(r),n=0;for(;s<=t;){let o=s.getDay();o!==0&&o!==6&&n++,s.setDate(s.getDate()+1)}return n}static isBusinessDay(e){let r=e.getDay();return!(r==0||r==6)}static getLastBusinessDay(e){for(;!q.isBusinessDay(e);)e.setDate(e.getDate()-1);return e}static extractScripCodesFromMcSearchResult(e){let r="";try{r=new DOMParser().parseFromString(e,"text/html").querySelector("span")?.textContent||""}catch(s){console.error(`An error occurred while trying to parse MC search result "${e}": ${s}`)}if(r){let s=r.split(""),t=!q.POSITIVE_WHOLE_NUMBER_REGEXP.test(s[1]);return{isin:s[0],nse:t?s[1]:"",bse:t?s[2]:s[1]}}else return null}};q.POSITIVE_WHOLE_NUMBER_REGEXP=new RegExp(/^\d+$/);var c=q;var H=(function(i){return i[i.STOCK=0]="STOCK",i[i.INDEX=1]="INDEX",i})(H||{}),pr=(()=>{let e=class e{constructor(){this.http=N(se),this.settingsService=N(Pe),this.MAX_CHART_HISTORY_IN_DAYS=5*365,this.refresh$=new pe(null),this.marketStatus$=this.settingsService.settings$.pipe(Z("refreshInterval"),y(({refreshInterval:s})=>ae(oe(0,s),this.refresh$.pipe(ce(1))))).pipe(y(()=>this.http.get(b.api.MARKET_STATUS).pipe(f(({marketStatusDto:s})=>({lastUpdated:s.currentTime,status:s.currentMarketStatus===ue.LIVE?W.OPEN:W.CLOSED,startTime:c.dateStringToEpoch(s.tradingStartTime),endTime:c.dateStringToEpoch(s.tradingEndTime)}))))).pipe(Ne(1)),this.poll$=this.marketStatus$.pipe(Z("status"),y(({status:s})=>ye(()=>s===W.OPEN,this.settingsService.settings$.pipe(Z("refreshInterval"),y(({refreshInterval:t})=>ae(oe(0,t),this.refresh$.pipe(ce(1))))),this.refresh$)))}refresh(){this.refresh$.next(null)}getStock(s,t){return t?this.getStockDetails(s):this.getStocks([s]).pipe(f(n=>n.length>0?n[0]:null))}getIndex(s,t,n){return n?this.getIndexDetails(s,t):this.getIndices([s]).pipe(f(o=>o.length>0?o[0]:null))}getStocks(s){let t={companies:[...s.map(n=>({id:n}))]};return this.poll$.pipe(y(()=>this.getDashboard(t).pipe(f(n=>{let o=n.companies||[];return o.length<=0?[]:o.map(a=>({name:a.companyName,scripCode:{nse:a.nseScripdCode?a.nseScripdCode.toUpperCase().endsWith("EQ")?a.nseScripdCode.slice(0,-2):a.nseScripdCode:void 0,bse:a.scripCode||void 0},vendorCode:{etm:{primary:a.companyId,chart:a.symbol}},quote:{nse:{lastUpdated:a.dateTimeLong,price:c.stringToNumber(a.lastTradedPrice),change:{direction:c.getDirection(c.stringToNumber(a.percentChange)),percentage:c.stringToNumber(a.percentChange),value:c.stringToNumber(a.change)},close:c.stringToNumber(a.previousclose),low:c.stringToNumber(a.low),high:c.stringToNumber(a.high),fiftyTwoWeekLow:c.stringToNumber(a.fiftyTwoWeekLowPrice),fiftyTwoWeekHigh:c.stringToNumber(a.fiftyTwoWeekHighPrice),volume:c.stringToNumber(a.volumeInK)*1e3}}}))}))))}getMainIndices(){let s=[],t=L.nse.find(o=>o.main===!0),n=L.bse.find(o=>o.main===!0);return t&&s.push(t.etm.id),n&&s.push(n.etm.id),this.getIndices(s)}getIndices(s){let t={indices:[...s.map(n=>({id:n}))]};return this.poll$.pipe(y(()=>this.getDashboard(t).pipe(f(n=>{let o=n.indices||[];return o.length<=0?[]:o.map(a=>({id:a.indexid,name:a.indexName,exchange:c.getExchangeNameFromVendorCode(a.exchange),vendorCode:{etm:{primary:a.indexid}},quote:{lastUpdated:a.dateTimeLong,value:c.stringToNumber(a.currentIndexValue),change:{direction:c.getDirection(c.stringToNumber(a.percentChange)),percentage:c.stringToNumber(a.percentChange),value:c.stringToNumber(a.netChange)},advance:{percentage:c.stringToNumber(a.advancesPercentange)+c.stringToNumber(a.noChangePercentage),value:c.stringToNumber(a.advances)+c.stringToNumber(a.noChange)},decline:{percentage:c.stringToNumber(a.declinesPercentange),value:c.stringToNumber(a.declines)}}}))}))))}getHistoricalChart(s,t){let n=t===H.STOCK?s:[...L.nse,...L.bse].find(o=>o.etm.id===s)?.etm.symbol||"";if(n){let o=t===H.STOCK?b.api.STOCK_HISTORIC_CHART:b.api.INDEX_HISTORIC_CHART,a=k.getTimestampSince(new Date,this.MAX_CHART_HISTORY_IN_DAYS),d=Date.now(),p=`symbol=${encodeURIComponent(n)}&from=${k.epochToUtcTimestamp(a)}&to=${k.epochToUtcTimestamp(d)}`;return a>0?this.http.get(o+p).pipe(f(({noData:S,dates:T,o:E,c:R,h:U,l:j,v:l})=>S?[]:[...new Set(T)].map((u,h)=>{let I=new Date(u).toLocaleDateString("en-CA",{timeZone:"Asia/Kolkata"}),m=h>0?R[h-1]:void 0,M=R[h],g,P;return m&&(g=M-m,P=g/m*100),{time:I,open:E[h],close:R[h],high:U[h],low:j[h],value:R[h],volume:l[h],previousDayClose:m,change:g!==void 0&&P!==void 0?{direction:c.getDirection(P),percentage:P,value:g}:void 0,lineColor:P&&c.getDirection(P)===D.UP?"#22c55e":"#ef4444"}}))):v([])}else return console.error(`Stock / Index not found for symbol: ${s}`),v([])}getIntraDayChart(s,t){let n=t===H.STOCK?s:[...L.nse,...L.bse].find(o=>o.etm.id===s)?.mc.symbol||"";if(s){let o=t===H.STOCK?b.api.STOCK_INTRA_DAY_CHART:b.api.INDEX_INTRA_DAY_CHART,a=c.getLastBusinessDay(new Date),d=a.setHours(9,15,0,0),p=a.setHours(15,30,0,0),S=`${encodeURIComponent(n)}&from=${k.epochToUtcTimestamp(d)}&to=${k.epochToUtcTimestamp(p)}`;return d>0?this.poll$.pipe(y(()=>this.http.get(o+S).pipe(f(({s:T,data:E})=>T===he.OK&&E&&E.length>0?E:[])))):v([])}else return console.error(`Stock / Index not found for symbol: ${s}`),v([])}search(s){return s?this.http.get(b.api.STOCK_SEARCH+s).pipe(f(t=>t.map(n=>({name:n.tagName,vendorCode:{etm:{primary:n.tagId,chart:n.symbol}},scripCode:{}})))):v([])}searchSecondary(s){return s?this.http.get(b.api.STOCK_SEARCH_SECONDARY+s).pipe(f(({result:t})=>t.map(n=>({name:n.fullnm||n.name,vendorCode:{etm:{primary:""},mc:{primary:n.id}},scripCode:{isin:n.isinid||void 0,nse:n.nseid||void 0,bse:parseInt(n.bseid)!==0?n.bseid:void 0}})))):v([])}getStockDetails(s){return this.poll$.pipe(y(()=>this.http.get(b.api.STOCK_QUOTE+s).pipe(f(t=>({name:t.companyName,scripCode:{nse:t.nseScripCode?t.nseScripCode.toUpperCase().endsWith("EQ")?t.nseScripCode.slice(0,-2):t.nseScripCode:void 0,bse:t.bseScripCode||void 0,isin:t.isinCode||void 0},vendorCode:{etm:{primary:t.companyId,chart:(t.nseScripCode&&t.nse?t.nse.symbol:t.bse?.symbol)||void 0}},details:{sector:t.sectorName,industry:t.industryName},quote:{nse:t.nse?{lastUpdated:t.nse.updatedDate,price:t.nse.current,change:{direction:c.getDirection(t.nse.percentChange),percentage:t.nse.percentChange,value:t.nse.absoluteChange},open:t.nse.open,close:t.nse.previousClose,low:t.nse.low,high:t.nse.high,fiftyTwoWeekLow:t.nse.fiftyTwoWeekLowPrice,fiftyTwoWeekHigh:t.nse.fiftyTwoWeekHighPrice,volume:t.nse.volume}:void 0,bse:t.bse?{lastUpdated:t.bse.updatedDate,price:t.bse.current,change:{direction:c.getDirection(t.bse.percentChange),percentage:t.bse.percentChange,value:t.bse.absoluteChange},open:t.bse.open,close:t.bse.previousClose,low:t.bse.low,high:t.bse.high,fiftyTwoWeekLow:t.bse.fiftyTwoWeekLowPrice,fiftyTwoWeekHigh:t.bse.fiftyTwoWeekHighPrice,volume:t.bse.volume}:void 0},metrics:{nse:t.nse?{marketCapType:t.nse.marketCapType,marketCap:t.nse.marketCap,faceValue:t.nse.faceValue,pe:t.nse.pe,pb:t.nse.pb,eps:t.nse.eps,vwap:t.nse.vwap,dividendYield:t.nse.dividendYield,bookValue:t.nse.bookValue}:void 0,bse:t.bse?{marketCapType:t.bse.marketCapType,marketCap:t.bse.marketCap,faceValue:t.bse.faceValue,pe:t.bse.pe,pb:t.bse.pb,eps:t.bse.eps,vwap:t.bse.vwap,dividendYield:t.bse.dividendYield,bookValue:t.bse.bookValue}:void 0},performance:{nse:t.nse?{weekly:{direction:c.getDirection(t.nse.performanceW1),percentage:t.nse.performanceW1,value:t.nse.performanceValueW1},monthly:{direction:c.getDirection(t.nse.performanceM1),percentage:t.nse.performanceM1,value:t.nse.performanceValueM1},quarterly:{direction:c.getDirection(t.nse.performanceM3),percentage:t.nse.performanceM3,value:t.nse.performanceValueM3},halfYearly:{direction:c.getDirection(t.nse.performanceM6),percentage:t.nse.performanceM6,value:t.nse.performanceValueM6},yearly:{one:{direction:c.getDirection(t.nse.performanceY1),percentage:t.nse.performanceY1,value:t.nse.performanceValueY1},three:{direction:c.getDirection(t.nse.performanceY3),percentage:t.nse.performanceY3,value:t.nse.performanceValueY3},five:{direction:c.getDirection(t.nse.performanceY5),percentage:t.nse.performanceY5,value:t.nse.performanceValueY5}}}:void 0,bse:t.bse?{weekly:{direction:c.getDirection(t.bse.performanceW1),percentage:t.bse.performanceW1,value:t.bse.performanceValueW1},monthly:{direction:c.getDirection(t.bse.performanceM1),percentage:t.bse.performanceM1,value:t.bse.performanceValueM1},quarterly:{direction:c.getDirection(t.bse.performanceM3),percentage:t.bse.performanceM3,value:t.bse.performanceValueM3},halfYearly:{direction:c.getDirection(t.bse.performanceM6),percentage:t.bse.performanceM6,value:t.bse.performanceValueM6},yearly:{one:{direction:c.getDirection(t.bse.performanceY1),percentage:t.bse.performanceY1,value:t.bse.performanceValueY1},three:{direction:c.getDirection(t.bse.performanceY3),percentage:t.bse.performanceY3,value:t.bse.performanceValueY3},five:{direction:c.getDirection(t.bse.performanceY5),percentage:t.bse.performanceY5,value:t.bse.performanceValueY5}}}:void 0}})))))}getIndexDetails(s,t){return this.poll$.pipe(y(()=>ge({index:this.http.get(b.api.INDEX_QUOTE+s).pipe(f(n=>({id:n.assetId,name:n.assetName,exchange:c.getExchangeNameFromVendorCode(n.assetExchangeId),vendorCode:{etm:{primary:n.assetId}},quote:{lastUpdated:n.dateTime,value:n.lastTradedPrice,change:{direction:c.getDirection(n.percentChange),percentage:n.percentChange,value:n.netChange},open:n.keyMetrics.openPrice,close:n.keyMetrics.previousClose,low:n.keyMetrics.lowPrice,high:n.keyMetrics.highPrice,fiftyTwoWeekLow:n.fiftyTwoWeekLow,fiftyTwoWeekHigh:n.fiftyTwoWeekHigh,advance:{percentage:n.advancesPercentage,value:n.advances},decline:{percentage:n.declinesPercentage,value:n.declines}},metrics:{marketCap:n.keyMetrics.marketCap,pe:n.keyMetrics.peRatio,pb:n.keyMetrics.pbRatio,dividendYield:n.keyMetrics.dividendYield},performance:{weekly:{direction:c.getDirection(n.r1Week),percentage:n.r1Week,value:n.change1Week},monthly:{direction:c.getDirection(n.r1Month),percentage:n.r1Month,value:n.change1Month},quarterly:{direction:c.getDirection(n.r3Month),percentage:n.r3Month,value:n.change3Month},halfYearly:{direction:c.getDirection(n.r6Month),percentage:n.r6Month,value:n.change6Month},yearly:{one:{direction:c.getDirection(n.r1Year),percentage:n.r1Year,value:n.change1Year},three:{direction:c.getDirection(n.r3Year),percentage:n.r3Year,value:n.change3Year},five:{direction:c.getDirection(n.r5Year),percentage:n.r5Year,value:n.change5Year}}}}))),constituents:this.http.get(b.api.INDEX_CONSTITUENTS+`exchange=${c.getExchangeVendorCodeFromName(t)}&indexid=${s}&sortby=netChange`).pipe(f(({searchresult:n})=>n[0]&&n[0].companies?.length>0?n[0].companies.map(o=>{let a={price:o.current,change:{direction:c.getDirection(o.percentChange),percentage:o.percentChange,value:o.change},volume:o.volumeInLacs*1e5};return{name:o.companyName,vendorCode:{etm:{primary:o.companyId,chart:o.symbol}},scripCode:{nse:t===w.NSE&&o.nseScripCode?o.nseScripCode:void 0,bse:t===w.BSE&&o.bseScripCode?o.bseScripCode:void 0},quote:{nse:t===w.NSE?a:void 0,bse:t===w.BSE?a:void 0}}}):[]))}).pipe(f(({index:n,constituents:o})=>me(Q({},n),{constituents:o})))))}getDashboard(s){return this.http.post(b.api.DASHBOARD,s)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();export{ut as a,W as b,w as c,D as d,k as e,H as f,pr as g};
