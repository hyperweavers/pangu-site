import{d as Pe,p as Se,q as Ie,x as Re}from"./chunk-SAUYN6Z2.js";import{a as E}from"./chunk-HY3UCQ3V.js";import{A as pe,C as ye,D as te,E as ne,G as ge,I as be,N as J,O as Te,S as Ee,Sa as Ce,T as ie,V as T,Y as R,a as K,aa as C,b as he,da as O,fa as A,ga as m,ha as ve,i as fe,ja as oe,k as me,ka as Ne,q as M,qa as we,u as f,ya as Me}from"./chunk-PPFHO4M5.js";var $=(function(i){return i[i.OPEN=0]="OPEN",i[i.CLOSED=1]="CLOSED",i})($||{}),P=(function(i){return i.NSE="nse",i.BSE="bse",i})(P||{}),j=(function(i){return i[i.UP=1]="UP",i[i.DOWN=-1]="DOWN",i})(j||{}),B={nse:[{name:"Nifty Pharma",etm:{id:"13017",symbol:"CNXPHARMA"},mc:{id:"41",symbol:"in;cpr"}},{name:"Nifty Financial Services",etm:{id:"13655",symbol:"FINNIFTY"},mc:{id:"47",symbol:"in;cnxf"}},{name:"Nifty Private Bank",etm:{id:"15270",symbol:"NIFTYPBI"},mc:{id:"79",symbol:"in;nxb"}},{name:"Nifty Bank",etm:{id:"1913",symbol:"BANKNIFTY"},mc:{id:"23",symbol:"in;nbx"}},{name:"Nifty Media",etm:{id:"13604",symbol:"CNXMEDIA"},mc:{id:"50",symbol:"in;cnmx"}},{name:"Nifty Services Sector",etm:{id:"13021",symbol:"CNXSSI"},mc:{id:"44",symbol:"in;crv"}},{name:"Nifty FMCG",etm:{id:"13027",symbol:"CNXFMCG"},mc:{id:"39",symbol:"in;cfm"}},{name:"Nifty India Consumption",etm:{id:"13653",symbol:"CNXCONSUM"},mc:{id:"56",symbol:"in;cnxc"}},{name:"Nifty SmallCap 100",etm:{id:"13532",symbol:"CNXSCAP"},mc:{id:"53",symbol:"in;cnxs"}},{name:"Nifty SmallCap 250",etm:{id:"15499",symbol:"NIFSC250"},mc:{id:"114",symbol:"mc;nscapt"}},{name:"Nifty SmallCap 50",etm:{id:"15431",symbol:"NIFSC50"},mc:{id:"113",symbol:"mc;nscapf"}},{name:"Nifty MidSmallCap 400",etm:{id:"15436",symbol:"NIFMSC400"},mc:{id:"112",symbol:"mc;nmsml"}},{name:"Nifty MidCap 100",etm:{id:"2495",symbol:"CNXMIDCAP"},mc:{id:"27",symbol:"in;ccx"}},{name:"Nifty MidCap 150",etm:{id:"15430",symbol:"NIFMC150"},mc:{id:"111",symbol:"mc;nmcapo"}},{name:"Nifty LargeMidCap 250",etm:{id:"16207",symbol:"NIFTYLMC250"},mc:{id:"124",symbol:"mc;larmid"}},{name:"Nifty 500",etm:{id:"2371",symbol:"CNX500"},mc:{id:"7",symbol:"in;ncx"}},{name:"Nifty 200",etm:{id:"13602",symbol:"CNX200"},mc:{id:"49",symbol:"in;cnxt"}},{name:"Nifty 100",etm:{id:"2510",symbol:"CNX100"},mc:{id:"28",symbol:"in;nnx"}},{name:"Nifty 50",main:!0,etm:{id:"2369",symbol:"NSE Index"},mc:{id:"9",symbol:"in;NSX"}},{name:"Nifty Oil & Gas",etm:{id:"32289",symbol:"NIFTYOILGAS"},mc:{id:"126",symbol:"mc;oilgas"}},{name:"Nifty Next 50",etm:{id:"2346",symbol:"NIFTYNXT50"},mc:{id:"6",symbol:"in;cjn"}},{name:"Nifty Energy",etm:{id:"13016",symbol:"CNXENERGY"},mc:{id:"38",symbol:"in;cgy"}},{name:"Nifty MidCap 50",etm:{id:"2907",symbol:"MIDCAP50"},mc:{id:"31",symbol:"in;mfy"}},{name:"Nifty Infrastructure",etm:{id:"13022",symbol:"CNXINFRA"},mc:{id:"35",symbol:"in;cfr"}},{name:"Nifty India Manufacturing",etm:{id:"47194",symbol:"NIFINDIAMANU"},mc:{id:"133",symbol:"mc;nindiamfg"}},{name:"Nifty PSU Bank",etm:{id:"13026",symbol:"CNXPSUBANK"},mc:{id:"43",symbol:"in;cuk"}},{name:"Nifty PSE",etm:{id:"13029",symbol:"CNXPSE"},mc:{id:"42",symbol:"in;cps"}},{name:"Nifty CPSE",etm:{id:"14214",symbol:"CPSE"},mc:{id:"61",symbol:"in;nxe"}},{name:"Nifty MNC",etm:{id:"13019",symbol:"CNXMNC"},mc:{id:"40",symbol:"in;cxc"}},{name:"Nifty Commodities",etm:{id:"13654",symbol:"CNXCOMMO"},mc:{id:"48",symbol:"in;cnxz"}},{name:"Nifty IT",etm:{id:"186",symbol:"CNXIT"},mc:{id:"19",symbol:"in;cnit"}},{name:"Nifty Metal",etm:{id:"13605",symbol:"CNXMETAL"},mc:{id:"51",symbol:"in;CNXM"}},{name:"Nifty Auto",etm:{id:"13603",symbol:"CNXAUTO"},mc:{id:"52",symbol:"in;cnxa"}},{name:"Nifty Realty",etm:{id:"13030",symbol:"CNXREALTY"},mc:{id:"34",symbol:"in;crl"}}],bse:[{name:"BSE SME IPO",etm:{id:"13794",symbol:"SMEIPO"},mc:{id:"58",symbol:"in;zpo"}},{name:"BSE Healthcare",etm:{id:"2276",symbol:"BSE HC"},mc:{id:"15",symbol:"IN;HAX"}},{name:"BSE Power",etm:{id:"12356",symbol:"POWER"},mc:{id:"30",symbol:"in;bpo"}},{name:"BSE IPO",etm:{id:"12725",symbol:"BSEIPO"},mc:{id:"33",symbol:"in;bip"}},{name:"BSE SmallCap",etm:{id:"2022",symbol:"SMLCAP"},mc:{id:"26",symbol:"in;BCX"}},{name:"BSE Telecommunication",etm:{id:"14917",symbol:"TELCOM"},mc:{id:"76",symbol:"in;tez"}},{name:"BSE Bankex",etm:{id:"2647",symbol:"BANKEX"},mc:{id:"18",symbol:"IN;bkx"}},{name:"BSE Fast Moving Consumer Goods",etm:{id:"2274",symbol:"BSEFMC"},mc:{id:"14",symbol:"IN;FMX"}},{name:"BSE SENSEX Next 50",etm:{id:"15817",symbol:"SNXT50"},mc:{id:"101",symbol:"in;bxn"}},{name:"BSE Utilities",etm:{id:"14848",symbol:"UTILS"},mc:{id:"77",symbol:"in;bsu"}},{name:"BSE 150 MidCap",etm:{id:"16178",symbol:"MID150"},mc:{id:"103",symbol:"in;MCD"}},{name:"BSE 400 MidSmallCap",etm:{id:"16177",symbol:"MSL400"},mc:{id:"106",symbol:"in;MSI"}},{name:"BSE 250 SmallCap",etm:{id:"16179",symbol:"SML250"},mc:{id:"104",symbol:"in;SCI"}},{name:"BSE Consumer Durables",etm:{id:"2275",symbol:"BSE CD"},mc:{id:"16",symbol:"IN;CDX"}},{name:"BSE AllCap",etm:{id:"14912",symbol:"ALLCAP"},mc:{id:"67",symbol:"IN;bsx"}},{name:"BSE 500",etm:{id:"2342",symbol:"BSE500"},mc:{id:"12",symbol:"IN;BNX"}},{name:"BSE LargeCap",etm:{id:"14852",symbol:"LRGCAP"},mc:{id:"73",symbol:"in;blp"}},{name:"BSE 200",etm:{id:"2364",symbol:"BSE200"},mc:{id:"2",symbol:"IN;SEI"}},{name:"BSE 250 LargeMidCap",etm:{id:"16181",symbol:"LMI250"},mc:{id:"105",symbol:"in;LMI"}},{name:"BSE SmallCap Select",etm:{id:"14959",symbol:"SMLSEL"},mc:{id:"75",symbol:"in;cey"}},{name:"BSE Sensex",main:!0,etm:{id:"2365",symbol:"SENSEX"},mc:{id:"4",symbol:"in;SEN"}},{name:"BSE 100",etm:{id:"2340",symbol:"BSE100"},mc:{id:"1",symbol:"IN;NTL"}},{name:"BSE MidCap",etm:{id:"1906",symbol:"MIDCAP"},mc:{id:"25",symbol:"in;bmx"}},{name:"BSE Sensex 50",etm:{id:"15648",symbol:"SNSX50"},mc:{id:"100",symbol:"in;bxx"}},{name:"BSE India Infrastructure",etm:{id:"14354",symbol:"INFRA"},mc:{id:"62",symbol:"mc;binfra"}},{name:"BSE Oil & Gas",etm:{id:"2555",symbol:"OILGAS"},mc:{id:"22",symbol:"IN;ogx"}},{name:"BSE Energy",etm:{id:"14911",symbol:"ENERGY"},mc:{id:"70",symbol:"in;bsq"}},{name:"BSE Industrials",etm:{id:"14856",symbol:"INDSTR"},mc:{id:"72",symbol:"in;scx"}},{name:"BSE CPSE",etm:{id:"14537",symbol:"CPSE"},mc:{id:"63",symbol:"mc;bcpse"}},{name:"BSE PSU",etm:{id:"6929",symbol:"BSEPSU"},mc:{id:"11",symbol:"in;pbx"}},{name:"BSE Capital Goods",etm:{id:"2273",symbol:"BSE CG"},mc:{id:"13",symbol:"IN;CGX"}},{name:"BSE MidCap Select",etm:{id:"14958",symbol:"MIDSEL"},mc:{id:"74",symbol:"in;ihb"}},{name:"BSE TECk",etm:{id:"10968",symbol:"TECK"},mc:{id:"10",symbol:"in;tkx"}},{name:"BSE Bharat 22",etm:{id:"16021",symbol:"BHRT22"},mc:{id:"102",symbol:"in;bin"}},{name:"BSE India Manufacturing",etm:{id:"14854",symbol:"MFG"},mc:{id:"66",symbol:"in;mfg"}},{name:"BSE Information Technology",etm:{id:"2157",symbol:"BSE IT"},mc:{id:"17",symbol:"IN;ifx"}},{name:"BSE Auto",etm:{id:"2416",symbol:"AUTO"},mc:{id:"20",symbol:"IN;aox"}},{name:"BSE Metal",etm:{id:"2449",symbol:"METAL"},mc:{id:"21",symbol:"IN;MLX"}},{name:"BSE Realty",etm:{id:"2739",symbol:"REALTY"},mc:{id:"29",symbol:"in;rea"}}]};var k=class{static epochToUtcTimestamp(r){return r&&r>0?Math.trunc(r/1e3):-1}static getTimestampSince(r,t){if(r&&r instanceof Date&&!isNaN(r.getTime())){let e=new Date(r);return e.setDate(e.getDate()-Math.abs(t)),e.getTime()}else return-1}};var _=class i{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(r){r?typeof r=="string"?this.lazyInit=()=>{this.headers=new Map,r.split(`
`).forEach(t=>{let e=t.indexOf(":");if(e>0){let n=t.slice(0,e),o=t.slice(e+1).trim();this.addHeaderEntry(n,o)}})}:typeof Headers<"u"&&r instanceof Headers?(this.headers=new Map,r.forEach((t,e)=>{this.addHeaderEntry(e,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(r).forEach(([t,e])=>{this.setHeaderEntries(t,e)})}:this.headers=new Map}has(r){return this.init(),this.headers.has(r.toLowerCase())}get(r){this.init();let t=this.headers.get(r.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(r){return this.init(),this.headers.get(r.toLowerCase())||null}append(r,t){return this.clone({name:r,value:t,op:"a"})}set(r,t){return this.clone({name:r,value:t,op:"s"})}delete(r,t){return this.clone({name:r,value:t,op:"d"})}maybeSetNormalizedName(r,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,r)}init(){this.lazyInit&&(this.lazyInit instanceof i?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(r=>this.applyUpdate(r)),this.lazyUpdate=null))}copyFrom(r){r.init(),Array.from(r.headers.keys()).forEach(t=>{this.headers.set(t,r.headers.get(t)),this.normalizedNames.set(t,r.normalizedNames.get(t))})}clone(r){let t=new i;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof i?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([r]),t}applyUpdate(r){let t=r.name.toLowerCase();switch(r.op){case"a":case"s":let e=r.value;if(typeof e=="string"&&(e=[e]),e.length===0)return;this.maybeSetNormalizedName(r.name,t);let n=(r.op==="a"?this.headers.get(t):void 0)||[];n.push(...e),this.headers.set(t,n);break;case"d":let o=r.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(u=>o.indexOf(u)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(r,t){let e=r.toLowerCase();this.maybeSetNormalizedName(r,e),this.headers.has(e)?this.headers.get(e).push(t):this.headers.set(e,[t])}setHeaderEntries(r,t){let e=(Array.isArray(t)?t:[t]).map(o=>o.toString()),n=r.toLowerCase();this.headers.set(n,e),this.maybeSetNormalizedName(r,n)}forEach(r){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>r(this.normalizedNames.get(t),this.headers.get(t)))}};var H=class{map=new Map;set(r,t){return this.map.set(r,t),this}get(r){return this.map.has(r)||this.map.set(r,r.defaultValue()),this.map.get(r)}delete(r){return this.map.delete(r),this}has(r){return this.map.has(r)}keys(){return this.map.keys()}},Q=class{encodeKey(r){return Oe(r)}encodeValue(r){return Oe(r)}decodeKey(r){return decodeURIComponent(r)}decodeValue(r){return decodeURIComponent(r)}};function Ve(i,r){let t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(n=>{let o=n.indexOf("="),[s,u]=o==-1?[r.decodeKey(n),""]:[r.decodeKey(n.slice(0,o)),r.decodeValue(n.slice(o+1))],c=t.get(s)||[];c.push(u),t.set(s,c)}),t}var $e=/%(\d[a-f0-9])/gi,We={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Oe(i){return encodeURIComponent(i).replace($e,(r,t)=>We[t]??r)}function q(i){return`${i}`}var S=class i{map;encoder;updates=null;cloneFrom=null;constructor(r={}){if(this.encoder=r.encoder||new Q,r.fromString){if(r.fromObject)throw new R(2805,!1);this.map=Ve(r.fromString,this.encoder)}else r.fromObject?(this.map=new Map,Object.keys(r.fromObject).forEach(t=>{let e=r.fromObject[t],n=Array.isArray(e)?e.map(q):[q(e)];this.map.set(t,n)})):this.map=null}has(r){return this.init(),this.map.has(r)}get(r){this.init();let t=this.map.get(r);return t?t[0]:null}getAll(r){return this.init(),this.map.get(r)||null}keys(){return this.init(),Array.from(this.map.keys())}append(r,t){return this.clone({param:r,value:t,op:"a"})}appendAll(r){let t=[];return Object.keys(r).forEach(e=>{let n=r[e];Array.isArray(n)?n.forEach(o=>{t.push({param:e,value:o,op:"a"})}):t.push({param:e,value:n,op:"a"})}),this.clone(t)}set(r,t){return this.clone({param:r,value:t,op:"s"})}delete(r,t){return this.clone({param:r,value:t,op:"d"})}toString(){return this.init(),this.keys().map(r=>{let t=this.encoder.encodeKey(r);return this.map.get(r).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(r=>r!=="").join("&")}clone(r){let t=new i({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(r),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(r=>this.map.set(r,this.cloneFrom.map.get(r))),this.updates.forEach(r=>{switch(r.op){case"a":case"s":let t=(r.op==="a"?this.map.get(r.param):void 0)||[];t.push(q(r.value)),this.map.set(r.param,t);break;case"d":if(r.value!==void 0){let e=this.map.get(r.param)||[],n=e.indexOf(q(r.value));n!==-1&&e.splice(n,1),e.length>0?this.map.set(r.param,e):this.map.delete(r.param)}else{this.map.delete(r.param);break}}}),this.cloneFrom=this.updates=null)}};function ze(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Ae(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function ke(i){return typeof Blob<"u"&&i instanceof Blob}function _e(i){return typeof FormData<"u"&&i instanceof FormData}function Ge(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}var Fe="Content-Type",Be="Accept",xe="text/plain",Le="application/json",Ke=`${Le}, ${xe}, */*`,X=class i{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(r,t,e,n){this.url=t,this.method=r.toUpperCase();let o;if(ze(this.method)||n?(this.body=e!==void 0?e:null,o=n):o=e,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new R(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),o.referrerPolicy&&(this.referrerPolicy=o.referrerPolicy),this.transferCache=o.transferCache}if(this.headers??=new _,this.context??=new H,!this.params)this.params=new S,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let u=t.indexOf("?"),c=u===-1?"?":u<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Ae(this.body)||ke(this.body)||_e(this.body)||Ge(this.body)?this.body:this.body instanceof S?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||_e(this.body)?null:ke(this.body)?this.body.type||null:Ae(this.body)?null:typeof this.body=="string"?xe:this.body instanceof S?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Le:null}clone(r={}){let t=r.method||this.method,e=r.url||this.url,n=r.responseType||this.responseType,o=r.keepalive??this.keepalive,s=r.priority||this.priority,u=r.cache||this.cache,c=r.mode||this.mode,p=r.redirect||this.redirect,I=r.credentials||this.credentials,y=r.referrer||this.referrer,N=r.integrity||this.integrity,L=r.referrerPolicy||this.referrerPolicy,U=r.transferCache??this.transferCache,D=r.timeout??this.timeout,l=r.body!==void 0?r.body:this.body,d=r.withCredentials??this.withCredentials,g=r.reportProgress??this.reportProgress,v=r.headers||this.headers,h=r.params||this.params,w=r.context??this.context;return r.setHeaders!==void 0&&(v=Object.keys(r.setHeaders).reduce((b,F)=>b.set(F,r.setHeaders[F]),v)),r.setParams&&(h=Object.keys(r.setParams).reduce((b,F)=>b.set(F,r.setParams[F]),h)),new i(t,e,l,{params:h,headers:v,context:w,reportProgress:g,responseType:n,withCredentials:d,transferCache:U,keepalive:o,cache:u,priority:s,timeout:D,mode:c,redirect:p,credentials:I,referrer:y,integrity:N,referrerPolicy:L})}},x=(function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i})(x||{}),V=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(r,t=200,e="OK"){this.headers=r.headers||new _,this.status=r.status!==void 0?r.status:t,this.statusText=r.statusText||e,this.url=r.url||null,this.redirected=r.redirected,this.responseType=r.responseType,this.ok=this.status>=200&&this.status<300}},Z=class i extends V{constructor(r={}){super(r)}type=x.ResponseHeader;clone(r={}){return new i({headers:r.headers||this.headers,status:r.status!==void 0?r.status:this.status,statusText:r.statusText||this.statusText,url:r.url||this.url||void 0})}},W=class i extends V{body;constructor(r={}){super(r),this.body=r.body!==void 0?r.body:null}type=x.Response;clone(r={}){return new i({body:r.body!==void 0?r.body:this.body,headers:r.headers||this.headers,status:r.status!==void 0?r.status:this.status,statusText:r.statusText||this.statusText,url:r.url||this.url||void 0,redirected:r.redirected??this.redirected,responseType:r.responseType??this.responseType})}},Y=class extends V{name="HttpErrorResponse";message;error;ok=!1;constructor(r){super(r,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${r.url||"(unknown url)"}`:this.message=`Http failure response for ${r.url||"(unknown url)"}: ${r.status} ${r.statusText}`,this.error=r.error||null}},Je=200,qe=204;var He=new O("");var Qe=/^\)\]\}',?\n/;var ae=(()=>{class i{xhrFactory;tracingService=m(Ce,{optional:!0});constructor(t){this.xhrFactory=t}maybePropagateTrace(t){return this.tracingService?.propagate?this.tracingService.propagate(t):t}handle(t){if(t.method==="JSONP")throw new R(-2800,!1);let e=this.xhrFactory;return M(null).pipe(T(()=>new fe(o=>{let s=e.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((l,d)=>s.setRequestHeader(l,d.join(","))),t.headers.has(Be)||s.setRequestHeader(Be,Ke),!t.headers.has(Fe)){let l=t.detectContentTypeHeader();l!==null&&s.setRequestHeader(Fe,l)}if(t.timeout&&(s.timeout=t.timeout),t.responseType){let l=t.responseType.toLowerCase();s.responseType=l!=="json"?l:"text"}let u=t.serializeBody(),c=null,p=()=>{if(c!==null)return c;let l=s.statusText||"OK",d=new _(s.getAllResponseHeaders()),g=s.responseURL||t.url;return c=new Z({headers:d,status:s.status,statusText:l,url:g}),c},I=this.maybePropagateTrace(()=>{let{headers:l,status:d,statusText:g,url:v}=p(),h=null;d!==qe&&(h=typeof s.response>"u"?s.responseText:s.response),d===0&&(d=h?Je:0);let w=d>=200&&d<300;if(t.responseType==="json"&&typeof h=="string"){let b=h;h=h.replace(Qe,"");try{h=h!==""?JSON.parse(h):null}catch(F){h=b,w&&(w=!1,h={error:F,text:h})}}w?(o.next(new W({body:h,headers:l,status:d,statusText:g,url:v||void 0})),o.complete()):o.error(new Y({error:h,headers:l,status:d,statusText:g,url:v||void 0}))}),y=this.maybePropagateTrace(l=>{let{url:d}=p(),g=new Y({error:l,status:s.status||0,statusText:s.statusText||"Unknown Error",url:d||void 0});o.error(g)}),N=y;t.timeout&&(N=this.maybePropagateTrace(l=>{let{url:d}=p(),g=new Y({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:d||void 0});o.error(g)}));let L=!1,U=this.maybePropagateTrace(l=>{L||(o.next(p()),L=!0);let d={type:x.DownloadProgress,loaded:l.loaded};l.lengthComputable&&(d.total=l.total),t.responseType==="text"&&s.responseText&&(d.partialText=s.responseText),o.next(d)}),D=this.maybePropagateTrace(l=>{let d={type:x.UploadProgress,loaded:l.loaded};l.lengthComputable&&(d.total=l.total),o.next(d)});return s.addEventListener("load",I),s.addEventListener("error",y),s.addEventListener("timeout",N),s.addEventListener("abort",y),t.reportProgress&&(s.addEventListener("progress",U),u!==null&&s.upload&&s.upload.addEventListener("progress",D)),s.send(u),o.next({type:x.Sent}),()=>{s.removeEventListener("error",y),s.removeEventListener("abort",y),s.removeEventListener("load",I),s.removeEventListener("timeout",N),t.reportProgress&&(s.removeEventListener("progress",U),u!==null&&s.upload&&s.upload.removeEventListener("progress",D)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(e){return new(e||i)(A(Ie))};static \u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Ze(i,r){return r(i)}function er(i,r,t){return(e,n)=>Ne(t,()=>r(e,o=>i(o,n)))}var Ue=new O("",{factory:()=>[]}),De=new O(""),je=new O("",{factory:()=>!0});var ce=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275prov=C({token:i,factory:function(e){let n=null;return e?n=new(e||i):n=A(ae),n},providedIn:"root"})}return i})();var ee=(()=>{class i{backend;injector;chain=null;pendingTasks=m(Me);contributeToStability=m(je);constructor(t,e){this.backend=t,this.injector=e}handle(t){if(this.chain===null){let e=Array.from(new Set([...this.injector.get(Ue),...this.injector.get(De,[])]));this.chain=e.reduceRight((n,o)=>er(n,o,this.injector),Ze)}if(this.contributeToStability){let e=this.pendingTasks.add();return this.chain(t,n=>this.backend.handle(n)).pipe(Te(e))}else return this.chain(t,e=>this.backend.handle(e))}static \u0275fac=function(e){return new(e||i)(A(ce),A(oe))};static \u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),de=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275prov=C({token:i,factory:function(e){let n=null;return e?n=new(e||i):n=A(ee),n},providedIn:"root"})}return i})();function se(i,r){return{body:r,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials,credentials:i.credentials,transferCache:i.transferCache,timeout:i.timeout,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,integrity:i.integrity,referrer:i.referrer,referrerPolicy:i.referrerPolicy}}var re=(()=>{class i{handler;constructor(t){this.handler=t}request(t,e,n={}){let o;if(t instanceof X)o=t;else{let c;n.headers instanceof _?c=n.headers:c=new _(n.headers);let p;n.params&&(n.params instanceof S?p=n.params:p=new S({fromObject:n.params})),o=new X(t,e,n.body!==void 0?n.body:null,{headers:c,context:n.context,params:p,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,credentials:n.credentials,referrer:n.referrer,referrerPolicy:n.referrerPolicy,integrity:n.integrity,timeout:n.timeout})}let s=M(o).pipe(be(c=>this.handler.handle(c)));if(t instanceof X||n.observe==="events")return s;let u=s.pipe(ge(c=>c instanceof W));switch(n.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return u.pipe(f(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new R(2806,!1);return c.body}));case"blob":return u.pipe(f(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new R(2807,!1);return c.body}));case"text":return u.pipe(f(c=>{if(c.body!==null&&typeof c.body!="string")throw new R(2808,!1);return c.body}));default:return u.pipe(f(c=>c.body))}case"response":return u;default:throw new R(2809,!1)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:new S().append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,se(n,e))}post(t,e,n={}){return this.request("POST",t,se(n,e))}put(t,e,n={}){return this.request("PUT",t,se(n,e))}static \u0275fac=function(e){return new(e||i)(A(de))};static \u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var rr=new O("",{factory:()=>!0}),tr="XSRF-TOKEN",nr=new O("",{factory:()=>tr}),ir="X-XSRF-TOKEN",or=new O("",{factory:()=>ir}),sr=(()=>{class i{cookieName=m(nr);doc=m(we);lastCookieString="";lastToken=null;parseCount=0;getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Se(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(e){return new(e||i)};static \u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Xe=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275prov=C({token:i,factory:function(e){let n=null;return e?n=new(e||i):n=A(sr),n},providedIn:"root"})}return i})();function ar(i,r){if(!m(rr)||i.method==="GET"||i.method==="HEAD")return r(i);try{let n=m(Pe).href,{origin:o}=new URL(n),{origin:s}=new URL(i.url,o);if(o!==s)return r(i)}catch(n){return r(i)}let t=m(Xe).getToken(),e=m(or);return t!=null&&!i.headers.has(e)&&(i=i.clone({headers:i.headers.set(e,t)})),r(i)}function cr(...i){let r=[re,ee,{provide:de,useExisting:ee},{provide:ce,useFactory:()=>m(He,{optional:!0})??m(ae)},{provide:Ue,useValue:ar,multi:!0}];for(let t of i)r.push(...t.\u0275providers);return ve(r)}var le=(function(i){return i.LIVE="Live",i.CLOSE="CLOSED",i})(le||{});var z=(function(i){return i.NSE="50",i.BSE="47",i})(z||{});var ue=(function(i){return i.OK="ok",i.NO_DATA="no_data",i.ERROR="error",i})(ue||{});var a=class i{static{this.POSITIVE_WHOLE_NUMBER_REGEXP=new RegExp(/^\d+$/)}static getDirection(r){return r>=0?j.UP:j.DOWN}static getExchangeNameFromVendorCode(r){return r===z.NSE?P.NSE:P.BSE}static getExchangeVendorCodeFromName(r){return r===P.NSE?z.NSE:z.BSE}static stringToNumber(r){return Number(r.replace(/,/g,""))}static dateStringToEpoch(r){return new Date(r).getTime()}static getBusinessDays(r,t){let e=new Date(r),n=new Date(t),o=0;for(;e<=n;){let s=e.getDay();s!==0&&s!==6&&o++,e.setDate(e.getDate()+1)}return o}static isBusinessDay(r){let t=r.getDay();return!(t==0||t==6)}static getLastBusinessDay(r){for(;!i.isBusinessDay(r);)r.setDate(r.getDate()-1);return r}static extractScripCodesFromMcSearchResult(r){let t="";try{t=new DOMParser().parseFromString(r,"text/html").querySelector("span")?.textContent||""}catch(e){console.error(`An error occurred while trying to parse MC search result "${r}": ${e}`)}if(t){let e=t.split(""),n=!i.POSITIVE_WHOLE_NUMBER_REGEXP.test(e[1]);return{isin:e[0],nse:n?e[1]:"",bse:n?e[2]:e[1]}}else return null}};var G=(function(i){return i[i.STOCK=0]="STOCK",i[i.INDEX=1]="INDEX",i})(G||{}),ft=(()=>{class i{constructor(){this.http=m(re),this.settingsService=m(Re),this.MAX_CHART_HISTORY_IN_DAYS=5*365,this.refresh$=new me(null),this.marketStatus$=this.settingsService.settings$.pipe(J("refreshInterval"),T(({refreshInterval:t})=>ne(te(0,t),this.refresh$.pipe(ie(1))))).pipe(T(()=>this.http.get(E.api.MARKET_STATUS).pipe(f(({marketStatusDto:t})=>({lastUpdated:t.currentTime,status:t.currentMarketStatus===le.LIVE?$.OPEN:$.CLOSED,startTime:a.dateStringToEpoch(t.tradingStartTime),endTime:a.dateStringToEpoch(t.tradingEndTime)}))))).pipe(Ee(1)),this.poll$=this.marketStatus$.pipe(J("status"),T(({status:t})=>ye(()=>t===$.OPEN,this.settingsService.settings$.pipe(J("refreshInterval"),T(({refreshInterval:e})=>ne(te(0,e),this.refresh$.pipe(ie(1))))),this.refresh$)))}refresh(){this.refresh$.next(null)}getStock(t,e){return e?this.getStockDetails(t):this.getStocks([t]).pipe(f(n=>n.length>0?n[0]:null))}getIndex(t,e,n){return n?this.getIndexDetails(t,e):this.getIndices([t]).pipe(f(o=>o.length>0?o[0]:null))}getStocks(t){let e={companies:[...t.map(n=>({id:n}))]};return this.poll$.pipe(T(()=>this.getDashboard(e).pipe(f(n=>{let o=n.companies||[];return o.length<=0?[]:o.map(s=>({name:s.companyName,scripCode:{nse:s.nseScripdCode?s.nseScripdCode.toUpperCase().endsWith("EQ")?s.nseScripdCode.slice(0,-2):s.nseScripdCode:void 0,bse:s.scripCode||void 0},vendorCode:{etm:{primary:s.companyId,chart:s.symbol}},quote:{nse:{lastUpdated:s.dateTimeLong,price:a.stringToNumber(s.lastTradedPrice),change:{direction:a.getDirection(a.stringToNumber(s.percentChange)),percentage:a.stringToNumber(s.percentChange),value:a.stringToNumber(s.change)},close:a.stringToNumber(s.previousclose),low:a.stringToNumber(s.low),high:a.stringToNumber(s.high),fiftyTwoWeekLow:a.stringToNumber(s.fiftyTwoWeekLowPrice),fiftyTwoWeekHigh:a.stringToNumber(s.fiftyTwoWeekHighPrice),volume:a.stringToNumber(s.volumeInK)*1e3}}}))}))))}getMainIndices(){let t=[],e=B.nse.find(o=>o.main===!0),n=B.bse.find(o=>o.main===!0);return e&&t.push(e.etm.id),n&&t.push(n.etm.id),this.getIndices(t)}getIndices(t){let e={indices:[...t.map(n=>({id:n}))]};return this.poll$.pipe(T(()=>this.getDashboard(e).pipe(f(n=>{let o=n.indices||[];return o.length<=0?[]:o.map(s=>({id:s.indexid,name:s.indexName,exchange:a.getExchangeNameFromVendorCode(s.exchange),vendorCode:{etm:{primary:s.indexid}},quote:{lastUpdated:s.dateTimeLong,value:a.stringToNumber(s.currentIndexValue),change:{direction:a.getDirection(a.stringToNumber(s.percentChange)),percentage:a.stringToNumber(s.percentChange),value:a.stringToNumber(s.netChange)},advance:{percentage:a.stringToNumber(s.advancesPercentange)+a.stringToNumber(s.noChangePercentage),value:a.stringToNumber(s.advances)+a.stringToNumber(s.noChange)},decline:{percentage:a.stringToNumber(s.declinesPercentange),value:a.stringToNumber(s.declines)}}}))}))))}getHistoricalChart(t,e){let n=e===G.STOCK?t:[...B.nse,...B.bse].find(o=>o.etm.id===t)?.etm.symbol||"";if(n){let o=e===G.STOCK?E.api.STOCK_HISTORIC_CHART:E.api.INDEX_HISTORIC_CHART,s=k.getTimestampSince(new Date,this.MAX_CHART_HISTORY_IN_DAYS),u=Date.now(),c=`symbol=${encodeURIComponent(n)}&from=${k.epochToUtcTimestamp(s)}&to=${k.epochToUtcTimestamp(u)}`;return s>0?this.http.get(o+c).pipe(f(({noData:p,dates:I,o:y,c:N,h:L,l:U,v:D})=>p?[]:[...new Set(I)].map((l,d)=>{let g=new Date(l).toLocaleDateString("en-CA",{timeZone:"Asia/Kolkata"}),v=d>0?N[d-1]:void 0,h=N[d],w,b;return v&&(w=h-v,b=w/v*100),{time:g,open:y[d],close:N[d],high:L[d],low:U[d],value:N[d],volume:D[d],previousDayClose:v,change:w!==void 0&&b!==void 0?{direction:a.getDirection(b),percentage:b,value:w}:void 0,lineColor:b&&a.getDirection(b)===j.UP?"#22c55e":"#ef4444"}}))):M([])}else return console.error(`Stock / Index not found for symbol: ${t}`),M([])}getIntraDayChart(t,e){let n=e===G.STOCK?t:[...B.nse,...B.bse].find(o=>o.etm.id===t)?.mc.symbol||"";if(t){let o=e===G.STOCK?E.api.STOCK_INTRA_DAY_CHART:E.api.INDEX_INTRA_DAY_CHART,s=a.getLastBusinessDay(new Date),u=s.setHours(9,15,0,0),c=s.setHours(15,30,0,0),p=`${encodeURIComponent(n)}&from=${k.epochToUtcTimestamp(u)}&to=${k.epochToUtcTimestamp(c)}`;return u>0?this.poll$.pipe(T(()=>this.http.get(o+p).pipe(f(({s:I,data:y})=>I===ue.OK&&y&&y.length>0?y:[])))):M([])}else return console.error(`Stock / Index not found for symbol: ${t}`),M([])}search(t){return t?this.http.get(E.api.STOCK_SEARCH+t).pipe(f(e=>e.map(n=>({name:n.tagName,vendorCode:{etm:{primary:n.tagId,chart:n.symbol}},scripCode:{}})))):M([])}searchSecondary(t){return t?this.http.get(E.api.STOCK_SEARCH_SECONDARY+t).pipe(f(({result:e})=>e.map(n=>({name:n.fullnm||n.name,vendorCode:{etm:{primary:""},mc:{primary:n.id}},scripCode:{isin:n.isinid||void 0,nse:n.nseid||void 0,bse:parseInt(n.bseid)!==0?n.bseid:void 0}})))):M([])}getStockDetails(t){return this.poll$.pipe(T(()=>this.http.get(E.api.STOCK_QUOTE+t).pipe(f(e=>({name:e.companyName,scripCode:{nse:e.nseScripCode?e.nseScripCode.toUpperCase().endsWith("EQ")?e.nseScripCode.slice(0,-2):e.nseScripCode:void 0,bse:e.bseScripCode||void 0,isin:e.isinCode||void 0},vendorCode:{etm:{primary:e.companyId,chart:(e.nseScripCode&&e.nse?e.nse.symbol:e.bse?.symbol)||void 0}},details:{sector:e.sectorName,industry:e.industryName},quote:{nse:e.nse?{lastUpdated:e.nse.updatedDate,price:e.nse.current,change:{direction:a.getDirection(e.nse.percentChange),percentage:e.nse.percentChange,value:e.nse.absoluteChange},open:e.nse.open,close:e.nse.previousClose,low:e.nse.low,high:e.nse.high,fiftyTwoWeekLow:e.nse.fiftyTwoWeekLowPrice,fiftyTwoWeekHigh:e.nse.fiftyTwoWeekHighPrice,volume:e.nse.volume}:void 0,bse:e.bse?{lastUpdated:e.bse.updatedDate,price:e.bse.current,change:{direction:a.getDirection(e.bse.percentChange),percentage:e.bse.percentChange,value:e.bse.absoluteChange},open:e.bse.open,close:e.bse.previousClose,low:e.bse.low,high:e.bse.high,fiftyTwoWeekLow:e.bse.fiftyTwoWeekLowPrice,fiftyTwoWeekHigh:e.bse.fiftyTwoWeekHighPrice,volume:e.bse.volume}:void 0},metrics:{nse:e.nse?{marketCapType:e.nse.marketCapType,marketCap:e.nse.marketCap,faceValue:e.nse.faceValue,pe:e.nse.pe,pb:e.nse.pb,eps:e.nse.eps,vwap:e.nse.vwap,dividendYield:e.nse.dividendYield,bookValue:e.nse.bookValue}:void 0,bse:e.bse?{marketCapType:e.bse.marketCapType,marketCap:e.bse.marketCap,faceValue:e.bse.faceValue,pe:e.bse.pe,pb:e.bse.pb,eps:e.bse.eps,vwap:e.bse.vwap,dividendYield:e.bse.dividendYield,bookValue:e.bse.bookValue}:void 0},performance:{nse:e.nse?{weekly:{direction:a.getDirection(e.nse.performanceW1),percentage:e.nse.performanceW1,value:e.nse.performanceValueW1},monthly:{direction:a.getDirection(e.nse.performanceM1),percentage:e.nse.performanceM1,value:e.nse.performanceValueM1},quarterly:{direction:a.getDirection(e.nse.performanceM3),percentage:e.nse.performanceM3,value:e.nse.performanceValueM3},halfYearly:{direction:a.getDirection(e.nse.performanceM6),percentage:e.nse.performanceM6,value:e.nse.performanceValueM6},yearly:{one:{direction:a.getDirection(e.nse.performanceY1),percentage:e.nse.performanceY1,value:e.nse.performanceValueY1},three:{direction:a.getDirection(e.nse.performanceY3),percentage:e.nse.performanceY3,value:e.nse.performanceValueY3},five:{direction:a.getDirection(e.nse.performanceY5),percentage:e.nse.performanceY5,value:e.nse.performanceValueY5}}}:void 0,bse:e.bse?{weekly:{direction:a.getDirection(e.bse.performanceW1),percentage:e.bse.performanceW1,value:e.bse.performanceValueW1},monthly:{direction:a.getDirection(e.bse.performanceM1),percentage:e.bse.performanceM1,value:e.bse.performanceValueM1},quarterly:{direction:a.getDirection(e.bse.performanceM3),percentage:e.bse.performanceM3,value:e.bse.performanceValueM3},halfYearly:{direction:a.getDirection(e.bse.performanceM6),percentage:e.bse.performanceM6,value:e.bse.performanceValueM6},yearly:{one:{direction:a.getDirection(e.bse.performanceY1),percentage:e.bse.performanceY1,value:e.bse.performanceValueY1},three:{direction:a.getDirection(e.bse.performanceY3),percentage:e.bse.performanceY3,value:e.bse.performanceValueY3},five:{direction:a.getDirection(e.bse.performanceY5),percentage:e.bse.performanceY5,value:e.bse.performanceValueY5}}}:void 0}})))))}getIndexDetails(t,e){return this.poll$.pipe(T(()=>pe({index:this.http.get(E.api.INDEX_QUOTE+t).pipe(f(n=>({id:n.assetId,name:n.assetName,exchange:a.getExchangeNameFromVendorCode(n.assetExchangeId),vendorCode:{etm:{primary:n.assetId}},quote:{lastUpdated:n.dateTime,value:n.lastTradedPrice,change:{direction:a.getDirection(n.percentChange),percentage:n.percentChange,value:n.netChange},open:n.keyMetrics.openPrice,close:n.keyMetrics.previousClose,low:n.keyMetrics.lowPrice,high:n.keyMetrics.highPrice,fiftyTwoWeekLow:n.fiftyTwoWeekLow,fiftyTwoWeekHigh:n.fiftyTwoWeekHigh,advance:{percentage:n.advancesPercentage,value:n.advances},decline:{percentage:n.declinesPercentage,value:n.declines}},metrics:{marketCap:n.keyMetrics.marketCap,pe:n.keyMetrics.peRatio,pb:n.keyMetrics.pbRatio,dividendYield:n.keyMetrics.dividendYield},performance:{weekly:{direction:a.getDirection(n.r1Week),percentage:n.r1Week,value:n.change1Week},monthly:{direction:a.getDirection(n.r1Month),percentage:n.r1Month,value:n.change1Month},quarterly:{direction:a.getDirection(n.r3Month),percentage:n.r3Month,value:n.change3Month},halfYearly:{direction:a.getDirection(n.r6Month),percentage:n.r6Month,value:n.change6Month},yearly:{one:{direction:a.getDirection(n.r1Year),percentage:n.r1Year,value:n.change1Year},three:{direction:a.getDirection(n.r3Year),percentage:n.r3Year,value:n.change3Year},five:{direction:a.getDirection(n.r5Year),percentage:n.r5Year,value:n.change5Year}}}}))),constituents:this.http.get(E.api.INDEX_CONSTITUENTS+`exchange=${a.getExchangeVendorCodeFromName(e)}&indexid=${t}&sortby=netChange`).pipe(f(({searchresult:n})=>n[0]&&n[0].companies?.length>0?n[0].companies.map(o=>{let s={price:o.current,change:{direction:a.getDirection(o.percentChange),percentage:o.percentChange,value:o.change},volume:o.volumeInLacs*1e5};return{name:o.companyName,vendorCode:{etm:{primary:o.companyId,chart:o.symbol}},scripCode:{nse:e===P.NSE&&o.nseScripCode?o.nseScripCode:void 0,bse:e===P.BSE&&o.bseScripCode?o.bseScripCode:void 0},quote:{nse:e===P.NSE?s:void 0,bse:e===P.BSE?s:void 0}}}):[]))}).pipe(f(({index:n,constituents:o})=>he(K({},n),{constituents:o})))))}getDashboard(t){return this.http.post(E.api.DASHBOARD,t)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{cr as a,$ as b,P as c,j as d,k as e,G as f,ft as g};
